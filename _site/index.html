<!DOCTYPE html>
<html lang="en">

<link href='//fonts.googleapis.com/css?family=Lato:400,700|Raleway:400,700|Comfortaa:700' rel='stylesheet' type='text/css'>
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Tinix&#39;s different point of view.</title>
  <meta name="description" content="Also known as Tinix , Degree in Computer Science FaMAF,Writer Software, Ruby, Elixir, Rust, Go, Linux and FreeBSD, I like have Mate, 4 lang​​, but all that means almost nothing..
">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:3000/">
  <link rel="alternate" type="application/rss+xml" title="Tinix&#39;s different point of view." href="http://localhost:3000/feed.xml">
</head>

  <body>
      <script id="dsq-count-scr" src="//tinixgit.disqus.com/count.js" async></script>

    <header class="site-header" role="banner">
    <!-- <div class="img-responsive">
      <img src="/fondo_ruby.jpg" height="100%"; alt="head_background">
    </div> -->
    </div>

  <div class="wrapper">

    <a class="site-title" href="/">Tinix&#39;s different point of view.</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/about/">About</a>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<!-- This loops through the paginated posts -->

  <script id="dsq-count-scr" src="//tinixgit.disqus.com/count.js" async></script>


  <h1><a href="/ruby/2023/02/04/ruby-debugging-map-blocks.html">Ruby Debugging Map Blocks</a></h1>
  <p class="author">
    <span class="date">2023-02-04 13:05:04 -0300</span>
  </p>
  <div class="content">
    <p>The thing to remember is that map operates on each element of the
collection for each run of the block. When debugging, you want to see how
the block operated on each element.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[1,2,3,4,5].map do |number|
    result = number*number
    puts "The result of the function on element: #{number} is #{result}"
    result
end
</code></pre>
</div>

<p>It is important to save the result in a local variable so that you can
return it as the last statement of the block. If you don’t, the result of the
puts statement will be returned (usually nil).</p>

  </div>

  <h1><a href="/ruby/2023/02/01/ruby-select.html">Ruby Select</a></h1>
  <p class="author">
    <span class="date">2023-02-01 20:29:35 -0300</span>
  </p>
  <div class="content">
    <p>This function of the Ruby Enumerable library is very simple. The select()
method is applied to an array or a hash. The job of select() is to select
elements that return true for a predicate applied to the element. (A predicate
is an expression that returns true or false, and it runs in the block passed
to select).
The following trivial example has the predicate always return true,
and therefore all members of the set are selected. In this case, the set is
[1,2,3,4,5] and the predicate is true:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[1,2,3,4,5].select do |element|
    true
end
=&gt; [1,2,3,4,5]
</code></pre>
</div>

<p>A slightly less trivial example selects even numbers (i.e., where the
predicate is **element % 2 == 0 ** ) from the original set of [1,2,3,4,5]:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[1,2,3,4,5].select do |element|
    element % 2 == 0
end
=&gt; [2,4]
</code></pre>
</div>

<p>Selects can be cascaded. Suppose you want to find the even numbers
between 1 and 100 starting with a 7. First, you select the even numbers.
Then, you select the numbers starting with a 7:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>irb&gt;  (1..100).select{|number| number % 2 == 0}\
irb*&gt; .select{|even_number| even_number.to_s[0] == "7"}
=&gt; [70,72.74,76,78]
</code></pre>
</div>

<p>You could also reverse the cascade:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>irb&gt;  (1..100).select{|number| number.to_s[0] == "7"}\
irb*&gt; .select{|seven_number| seven_number % 2 == 0}
=&gt; [70,72.74,76,78]
</code></pre>
</div>

<p>Since select returns an array, you can cascade select calls. For
example, you could have a select block select even numbers and then
square them using a map call. For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[1,2,3,4,5].select do |number|
    number%2==0
end.map do |even_number|
    even_number * even_number
end
=&gt; [4, 16]
</code></pre>
</div>

<p>A number of the more complex operations can be solved by cascading
with select calls.</p>

  </div>

  <h1><a href="/ruby/2023/01/28/ruby-simple-reduce.html">Ruby Simple Reduce</a></h1>
  <p class="author">
    <span class="date">2023-01-28 11:54:08 -0300</span>
  </p>
  <div class="content">
    <p>I’ll show you here how to implement some functions already available for
arrays, but using reduce(), map(), and select().</p>

<h2 id="uniq">uniq</h2>
<p>This function finds a set of unique elements in an array. For example:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>irb&gt; [1,3,5,6,7,8,6,6,1,1].uniq
=&gt; [1,3,5,6,7,8]
</code></pre>
</div>

<p>To implement uniq, we need a way to identify unique elements. First,
realize that a hash Hash is keyed by unique values. So, as we run reduce, we
just have to put each element as the key of a hash. If the element already
exists, the value in the hash is overwritten. So, the initial value of the memo
should be {}.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[1,3,5,6,7,8,6,6,1,1].reduce({}) do |memo, element|
memo[element]=element
 memo
end
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>⇒ {1⇒1, 3⇒3, 5⇒5, 6⇒6, 7⇒7, 8⇒8}
</code></pre>
</div>

<p>Almost. Now, we just have to pick off the keys using map:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[1,3,5,6,7,8,6,6,1,1].reduce({}) do |memo, element|
memo[element] = element
  memo
end.map do |key, value|
    key
end
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>=&gt; [1, 3, 5, 6, 7, 8]
</code></pre>
</div>

<h2 id="reverse">reverse</h2>
<p>This function reverses the order of the elements in an array:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>irb&gt; [1,3,5,6,7,8,6,0].reverse
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>=&gt; [0, 6, 8, 7, 6, 5, 3, 1]
</code></pre>
</div>

<p>One way to solve this is to keep pushing each element on a stack.
A stack is just an array where you use unshift to push an element onto
the front, and shift to pop elements off the front. The initial value of the
reduce memo is a blank array. I put a print statement so you can see for
yourself how the memo builds up.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[1,3,5,6,7,8,6,0].reduce([]) do |memo, element|
memo.unshift element
  puts "After unshifting element: #{element}, the memo is:
#{memo.inspect}"
  memo
end
</code></pre>
</div>

<p>The output is as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>After unshifting element: 1, the memo is: [1]
After unshifting element: 3, the memo is: [3, 1]
After unshifting element: 5, the memo is: [5, 3, 1]
After unshifting element: 6, the memo is: [6, 5, 3, 1]
After unshifting element: 7, the memo is: [7, 6, 5, 3, 1]
After unshifting element: 8, the memo is: [8, 7, 6, 5, 3, 1]
After unshifting element: 6, the memo is: [6, 8, 7, 6, 5, 3, 1]
After unshifting element: 0, the memo is: [0, 6, 8, 7, 6, 5, 3, 1]
=&gt; [0, 6, 8, 7, 6, 5, 3, 1]
</code></pre>
</div>

<h2 id="max">max</h2>
<p>This function finds the largest element in an array:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>irb&gt; [1,3,5,6,7,8,6,0].max
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>=&gt; 8
</code></pre>
</div>

<p>Reduce will work here because as you iterate through the array, you
save the largest value in the memo. This example does not even need an
explicit initial value, because the first element is the default value for the
memo.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[4,3,5,6,7,8,6,0].reduce do |memo, element|
if element &gt; memo
   memo = element
 else
   memo = memo
end
puts "The largest element after checking #{element} is #{memo}"
memo
end
</code></pre>
</div>

<div class="highlighter-rouge"><pre class="highlight"><code>The largest element after checking 3 is 4
The largest element after checking 5 is 5
The largest element after checking 6 is 6
The largest element after checking 7 is 7
The largest element after checking 8 is 8
The largest element after checking 6 is 8
The largest element after checking 0 is 8
=&gt; 8
</code></pre>
</div>

<p>Of course, the terse way to encode this is as follows:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[4,3,5,6,7,8,6,0].reduce do |memo, element|
 (element &gt; memo) ? element : memo
end
=&gt; 8
</code></pre>
</div>

  </div>

  <h1><a href="/ruby/2023/01/24/ruby-reduce.html">Ruby Reduce</a></h1>
  <p class="author">
    <span class="date">2023-01-24 21:21:27 -0300</span>
  </p>
  <div class="content">
    <p>This function of the Ruby Enumerable library is more complex than map()
and is quite powerful. The method is applied to a collection (for example,
an array or a hash). The job of reduce() is to apply a function cumulatively
to each member of the collection and then return an object (which could
be an array, a single value, a hash, or anything).</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">:</span><span class="o">+</span><span class="p">)</span></code></pre></figure>

<p>This is like saying for each member of the list, add (:+) the member to
memo and save the memo for the next element. The initial value of memo is 0
(the first parameter). Another way to code it is as follows:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">memo</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">each</span><span class="p">{</span><span class="o">|</span><span class="n">element</span><span class="o">|</span> <span class="n">memo</span> <span class="o">=</span> <span class="n">memo</span><span class="p">.</span><span class="nf">+</span><span class="p">(</span><span class="n">element</span><span class="p">)}</span></code></pre></figure>

<p>Or, you can pass reduce a block of code to run. The block comes after
the closing parenthesis and is surrounded by a do-end construct, or a {}
construct. The emitted variables are always the memo first and the element
second. (In this case, the initial value of memo is 33).</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">memo</span><span class="p">,</span> <span class="n">element</span><span class="o">|</span>
  <span class="n">memo</span><span class="p">.</span><span class="nf">+</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">memo</span>
<span class="o">=&gt;</span> <span class="mi">48</span></code></pre></figure>

<p>(You don’t have to call them “memo” or “element,” but that is how they
behave). After each iteration, the memo takes the value of the last object in
the block. For example:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">33</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">memo</span><span class="p">,</span> <span class="n">element</span><span class="o">|</span>
  <span class="n">memo</span><span class="p">.</span><span class="nf">+</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
  <span class="mi">77</span><span class="o">.</span><span class="mi">7</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="mi">77</span><span class="o">.</span><span class="mi">7</span></code></pre></figure>

<p>This returned 77.7, because that was the last object in the block.
Another thing to remember is that the memo returned by the block has
to be of the same class as the memo emitted by the reduce function. For
example, when you are using reduce() to build a Hash object, you must
return the whole Hash object:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">reduce</span><span class="p">({})</span> <span class="k">do</span> <span class="o">|</span><span class="n">memo</span><span class="p">,</span> <span class="n">element</span><span class="o">|</span>
  <span class="n">memo</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">=</span> <span class="n">element</span><span class="p">.</span><span class="nf">to_s</span>
<span class="k">end</span></code></pre></figure>

<p>IndexError: index 2 out of string
There is an error because the first run of the iteration returned
memo[element], which is a String class, but the input expects it to be a
Hash. To correct it, make sure that the memo of class Hash is explicitly the last
object returned, as follows:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">reduce</span><span class="p">({})</span> <span class="k">do</span> <span class="o">|</span><span class="n">memo</span><span class="p">,</span> <span class="n">element</span><span class="o">|</span>
  <span class="n">memo</span><span class="p">[</span><span class="n">element</span><span class="p">]</span> <span class="o">=</span> <span class="n">element</span><span class="p">.</span><span class="nf">to_s</span>
  <span class="n">memo</span>
<span class="k">end</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">=&gt;</span> <span class="p">{</span><span class="mi">1</span><span class="o">=&gt;</span><span class="s2">"1"</span><span class="p">,</span> <span class="mi">2</span><span class="o">=&gt;</span><span class="s2">"2"</span><span class="p">,</span> <span class="mi">3</span><span class="o">=&gt;</span><span class="s2">"3"</span><span class="p">,</span> <span class="mi">4</span><span class="o">=&gt;</span><span class="s2">"4"</span><span class="p">,</span> <span class="mi">5</span><span class="o">=&gt;</span><span class="s2">"5"</span><span class="p">}</span></code></pre></figure>

<p>This worked because memo is a Hash class and was returned every time.
You can think of the reduce operation as operating on each element
and saving some kind of memo to carry forward to the operation on the
next element. In the preceding example, where you calculate the sum of
five numbers,</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">,:</span><span class="o">+</span><span class="p">)</span></code></pre></figure>

<p>or</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">memo</span><span class="p">,</span> <span class="n">element</span><span class="o">|</span>
  <span class="n">memo</span> <span class="o">+</span> <span class="n">element</span>
<span class="k">end</span></code></pre></figure>

<p>you are initializing the remembered quantity with a 0 and telling it to
remember to add the current element to the previously reduced quantity
and save it. The initial value of memo is an integer, and the last object
returned by the reduce block is also an integer.
You could remember other things in the memo too. For example,
you could save the last two numbers of a sequence. You would start with
an initial value of [nil,nil] for the last two remembered things. On every
iteration, you would push the element onto the memo (end of the array),
and then you would shift off the first element of the array.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">initial_memo</span> <span class="o">=</span> <span class="p">[</span><span class="kp">nil</span><span class="p">,</span><span class="kp">nil</span><span class="p">]</span>
<span class="n">last_2</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="nf">.</span><span class="mi">10</span><span class="p">).</span><span class="nf">reduce</span><span class="p">(</span><span class="n">initial_memo</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">memo</span><span class="p">,</span> <span class="n">element</span><span class="o">|</span>
   <span class="n">initial_memo</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span> <span class="n">element</span> <span class="p">)</span>
   <span class="n">initial_memo</span><span class="p">.</span><span class="nf">shift</span>
   <span class="n">initial_memo</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">]</span></code></pre></figure>

<p>In general, if you have to remember something about the previously
used elements when operating on the current element, use reduce(). If
you don’t need to remember anything, use map().
Sometimes reduce returns an array, in which case you can cascade it
with other reduce calls or map calls. For example, if you want to add the
sum of squares, you can use a map call to square each element, and then a
reduce call to add them. For example:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="n">number</span> <span class="o">*</span> <span class="n">number</span>
<span class="k">end</span><span class="p">.</span><span class="nf">reduce</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">sum</span><span class="p">,</span> <span class="n">square</span><span class="o">|</span>
  <span class="n">sum</span> <span class="o">+</span> <span class="n">square</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="mi">55</span></code></pre></figure>

<p>Or, perhaps you want to find the odd numbers of the last five in a
sequence:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sequence</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">455</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">45</span><span class="p">,</span><span class="mi">66</span><span class="p">,</span><span class="mi">77</span><span class="p">,</span><span class="mi">54</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">55</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">sequence</span><span class="p">.</span><span class="nf">reduce</span><span class="p">([</span><span class="kp">nil</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="kp">nil</span><span class="p">,</span><span class="kp">nil</span><span class="p">])</span> <span class="k">do</span> <span class="o">|</span><span class="n">memo</span><span class="p">,</span> <span class="n">number</span><span class="o">|</span>
  <span class="n">memo</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
  <span class="n">memo</span><span class="p">.</span><span class="nf">shift</span>
  <span class="n">memo</span>
<span class="k">end</span><span class="p">.</span><span class="nf">select</span> <span class="k">do</span> <span class="o">|</span><span class="n">one_of_last_5</span><span class="o">|</span>
  <span class="n">one_of_last_5</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span>
<span class="k">end</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="mi">23</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span></code></pre></figure>

<p>If this seems complex and idiomatic, don’t worry, because we’ll
explore these programming mechanics later in the blog. It suffices to say
that reduce can be used on both sides of a data-processing cascade. And
please always remember that the input memo must be of the same class or
structure as the output memo.</p>

  </div>

  <h1><a href="/ruby/2023/01/19/ruby-map.html">Ruby Map</a></h1>
  <p class="author">
    <span class="date">2023-01-19 23:46:38 -0300</span>
  </p>
  <div class="content">
    <p>The Ruby library includes the module Enumerable. This library contains
map(), reduce(), select(), and other functions.</p>

<p>Map
This function of the Ruby Enumerable library is simple but profound. The map() method is applied to an array or a hash. The job of map() is to apply a function or block to each member of the array and return a new array.
So, when you see</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
  <span class="n">xx</span>
<span class="k">end</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">output_array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="n">f</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="k">end</span></code></pre></figure>

<p>you read, for each number in [1,2,3,4,5] apply f(x) to return the array
[f(1), f(2), f(3), f(4), f(5)]. In this case, the answer is [1,4,9,16,25].
One could encode it in traditional imperative programming as follows:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">output_array</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">number</span> <span class="k">in</span> <span class="mi">1</span><span class="p">.</span><span class="nf">.</span><span class="mi">5</span>
  <span class="n">output_array</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span> <span class="n">f</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="p">)</span>
<span class="k">end</span></code></pre></figure>

<p>Using map, for example:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">output_array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="n">number</span> <span class="o">*</span> <span class="n">number</span>
<span class="k">end</span></code></pre></figure>

<p>Or, you could encode it as follows:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">output_array</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span><span class="n">element</span><span class="o">|</span> <span class="n">element</span> <span class="o">*</span> <span class="n">element</span><span class="p">}</span></code></pre></figure>

<p>[1,2,3,4,5] is the array. The function (or block) to be applied to each
element is {|element| element<em>element }.
With the { } syntax, or the do-end syntax, the object in the vertical bars
(represented by element) is the element of the array currently being acted
upon by the block, and the last object in any function or block is the return
value, so element</em>element is returned. The net result is the following:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">16</span><span class="p">,</span><span class="mi">25</span><span class="p">]</span></code></pre></figure>

<p>Suppose you wanted to provide data to a graphing program that
plotted the square of the value.</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">map</span><span class="p">{</span><span class="o">|</span><span class="n">element</span><span class="o">|</span> <span class="p">[</span><span class="n">element</span><span class="p">,</span> <span class="n">element</span><span class="o">*</span> <span class="n">element</span><span class="p">]}</span></code></pre></figure>

<p>In this case, each “point” is a tuple (array) with an element and its
square. This returns the following:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">],[</span><span class="mi">3</span><span class="p">,</span><span class="mi">9</span><span class="p">],[</span><span class="mi">4</span><span class="p">,</span><span class="mi">16</span><span class="p">],[</span><span class="mi">5</span><span class="p">,</span><span class="mi">25</span><span class="p">]]</span></code></pre></figure>

<p>The difference is that the block returns an array each time with the
number and its square, so the result is an array of arrays.
Since map returns an array, you can cascade map calls. For example,
you could have a map block square each element, and then a second map
block add 100. For example:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">].</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">number</span><span class="o">|</span>
  <span class="n">number</span> <span class="o">*</span> <span class="n">number</span>
<span class="k">end</span><span class="p">.</span><span class="nf">map</span> <span class="k">do</span> <span class="o">|</span><span class="n">square</span><span class="o">|</span>
  <span class="n">square</span> <span class="o">+</span> <span class="mi">100</span>
<span class="k">end</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="o">=&gt;</span> <span class="p">[</span><span class="mi">101</span><span class="p">,</span> <span class="mi">104</span><span class="p">,</span> <span class="mi">109</span><span class="p">,</span> <span class="mi">116</span><span class="p">,</span> <span class="mi">125</span><span class="p">]</span></code></pre></figure>

<p>A number of the more complex operations can be solved by cascading with map calls.</p>

  </div>

<br>
<!--Pagination links  -->

<div class="btn btn-default">
  
  <span>&laquo; Prev</span>
  

  
  
  <em>1</em>
  
  
  
  <a href="/page2">2</a>
  
  
  
  <a href="/page3">3</a>
  
  
  
  <a href="/page4">4</a>
  
  
  
  <a href="/page5">5</a>
  
  
  
  <a href="/page6">6</a>
  
  
  
  <a href="/page7">7</a>
  
  
  
  <a href="/page8">8</a>
  
  

  
  <a href="/page2">Next &raquo;</a>
  
</div>

<br>
<hr>
  <p class="rss-subscribe">subscribe <a href="/feed.xml">via RSS</a></p>


      </div>
    </main>
    <footer class="site-footer">
  <div class="wrapper">
    <h2 class="footer-heading">Tinix&#39;s different point of view.</h2>
    <p>Thoughts notes and other things more...</p>
    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <!-- <li>Tinix&#39;s different point of view.</li> -->
          <li><a href="mailto:daniel.tinivella@gmail.com">daniel.tinivella@gmail.com</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">

          
          <li>
            <a href="https://github.com/Tinix"><span class="icon icon--github"><svg viewBox="0 0 16 16"><path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
</span><span class="username">Tinix</span></a>

          </li>
          

          
          <li>
            <a href="https://twitter.com/Tinix"><span class="icon icon--twitter"><svg viewBox="0 0 16 16"><path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/></svg>
</span><span class="username">Tinix</span></a>

          </li>
          

          
          <li>
            <a href="https://gitlab.com/Tinix"><span class="icon icon--gitlab"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><rect width="512" height="512" rx="15%" fill="#30353e"/><path fill="#e24329" d="M84 215l43-133c2-7 12-7 14 0l115 353L371 82c2-7 12-7 14 0l43 133"/><path fill="#fc6d26" d="M256 435L84 215h100.4zm71.7-220H428L256 435l71.6-220z"/><path fill="#fca326" d="M84 215l-22 67c-2 6 0 13 6 16l188 137zm344 0l22 67c2 6 0 13-6 16L256 435z"/></svg></span>
  <span class="username">Tinix</span></a>

          </li>
          

        </ul>
      </div>

      <!-- Begin Stat for Default  -->
      <script type="text/javascript">
        var sc_project=9629919;
        var sc_invisible=1;
        var sc_security="fd5bb5c2";
        var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
        document.write("<sc"+"ript type='text/javascript' src='" +
          scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
      </script>
      <noscript><div class="statcounter"><a title="shopify visitor
      statistics" href="http://statcounter.com/shopify/"
                  target="_blank"><img class="statcounter"
                                       src="http://c.statcounter.com/9629919/0/fd5bb5c2/1/"
                                       alt="shopify visitor statistics"></a></div></noscript>
      <!-- End of Stat for Default -->

      <!-- Yandex.Metrika counter -->
      <script type="text/javascript" >
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
          m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(56423338, "init", {
          clickmap:true,
          trackLinks:true,
          accurateTrackBounce:true
        });
      </script>
      <noscript><div><img src="https://mc.yandex.ru/watch/56423338" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
      <!-- /Yandex.Metrika counter -->
      <div class="footer-col footer-col-3">
        <p>
          &copy; 2003 - 2023 Daniel Tinivella.<br /> All rights reserved.<br/>
          DanielTinivella is powered by: <a href="http://jekyllrb.com">Jekyll</a>,<br />
          <a href="https://www.vim.org/">Vim</a> and <a href="http://disqus.com">Disqus</a>
      </div>
    </div>
  </div>
</footer>


  </body>

</html>
